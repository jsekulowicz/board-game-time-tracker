import{j as U,E as j,F as H,i as P,G as T,H as q,J as $,K as Y,l as G,q as V}from"./UiCard.vue_vue_type_script_setup_true_lang-CKccHbgD.js";import{c as x,r as w,w as I,y as R,Z as X,h as J,N as Z,C as L,p as z,o as Q,q as ee,k as te,u as ne}from"./index-BWwxUqkb.js";function g(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const[oe]=U("ConfigProvider");function O(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function k(e,t,n=".",o){if(!O(t))return k(e,{},n,o);const a=Object.assign({},t);for(const i in e){if(i==="__proto__"||i==="constructor")continue;const c=e[i];c!=null&&(o&&o(a,i,c,n)||(Array.isArray(c)&&Array.isArray(a[i])?a[i]=[...c,...a[i]]:O(c)&&O(a[i])?a[i]=k(c,a[i],(n?`${n}.`:"")+i.toString(),o):a[i]=c))}return a}function re(e){return(...t)=>t.reduce((n,o)=>k(n,o,"",e),{})}const se=re(),ue=j(()=>{const e=w(new Map),t=w(),n=x(()=>{for(const c of e.value.values())if(c)return!0;return!1}),o=oe({scrollBody:w(!0)});let a=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",T&&a?.(),t.value=void 0};return I(n,(c,m)=>{if(!P)return;if(!c){m&&i();return}t.value===void 0&&(t.value=document.body.style.overflow);const d=window.innerWidth-document.documentElement.clientWidth,b={padding:d,margin:0},s=o.scrollBody?.value?typeof o.scrollBody.value=="object"?se({padding:o.scrollBody.value.padding===!0?d:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?d:o.scrollBody.value.margin},b):b:{padding:0,margin:0};d>0&&(document.body.style.paddingRight=typeof s.padding=="number"?`${s.padding}px`:String(s.padding),document.body.style.marginRight=typeof s.margin=="number"?`${s.margin}px`:String(s.margin),document.documentElement.style.setProperty("--scrollbar-width",`${d}px`),document.body.style.overflow="hidden"),T&&(a=q(document,"touchmove",r=>ae(r),{passive:!1})),R(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function Se(e){const t=Math.random().toString(36).substring(2,7),n=ue();n.value.set(t,e);const o=x({get:()=>n.value.get(t)??!1,set:a=>n.value.set(t,a)});return H(()=>{n.value.delete(t)}),o}function W(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:W(n)}}function ae(e){const t=e||window.event,n=t.target;return n instanceof Element&&W(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}var ie=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},E=new WeakMap,S=new WeakMap,F={},A=0,D=function(e){return e&&(e.host||D(e.parentNode))},ce=function(e,t){return t.map(function(n){if(e.contains(n))return n;var o=D(n);return o&&e.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},le=function(e,t,n,o){var a=ce(t,Array.isArray(e)?e:[e]);F[n]||(F[n]=new WeakMap);var i=F[n],c=[],m=new Set,d=new Set(a),b=function(r){!r||m.has(r)||(m.add(r),b(r.parentNode))};a.forEach(b);var s=function(r){!r||d.has(r)||Array.prototype.forEach.call(r.children,function(u){if(m.has(u))s(u);else try{var p=u.getAttribute(o),l=p!==null&&p!=="false",f=(E.get(u)||0)+1,v=(i.get(u)||0)+1;E.set(u,f),i.set(u,v),c.push(u),f===1&&l&&S.set(u,!0),v===1&&u.setAttribute(n,"true"),l||u.setAttribute(o,"true")}catch(y){console.error("aria-hidden: cannot operate on ",u,y)}})};return s(t),m.clear(),A++,function(){c.forEach(function(r){var u=E.get(r)-1,p=i.get(r)-1;E.set(r,u),i.set(r,p),u||(S.has(r)||r.removeAttribute(o),S.delete(r)),p||r.removeAttribute(n)}),A--,A||(E=new WeakMap,E=new WeakMap,S=new WeakMap,F={})}},fe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),a=ie(e);return a?(o.push.apply(o,Array.from(a.querySelectorAll("[aria-live], script"))),le(o,a,n,"aria-hidden")):function(){return null}};function Fe(e){let t;I(()=>$(e),n=>{n?t=fe(n):t&&t()}),X(()=>{t&&t()})}const de=Y(()=>w([]));function pe(){const e=de();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=N(e.value,t),e.value.unshift(t)},remove(t){e.value=N(e.value,t),e.value[0]?.resume()}}}function N(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function ve(e){return e.filter(t=>t.tagName!=="A")}const C="focusScope.autoFocusOnMount",_="focusScope.autoFocusOnUnmount",M={bubbles:!1,cancelable:!0};function me(e,{select:t=!1}={}){const n=g();for(const o of e)if(h(o,{select:t}),g()!==n)return!0}function ye(e){const t=K(e),n=B(t,e),o=B(t.reverse(),e);return[n,o]}function K(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const a=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||a?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function B(e,t){for(const n of e)if(!he(n,{upTo:t}))return n}function he(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function be(e){return e instanceof HTMLInputElement&&"select"in e}function h(e,{select:t=!1}={}){if(e&&e.focus){const n=g();e.focus({preventScroll:!0}),e!==n&&be(e)&&t&&e.select()}}var Ee=J({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,o=t,{currentRef:a,currentElement:i}=G(),c=w(null),m=pe(),d=Z({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});L(s=>{if(!P)return;const r=i.value;if(!n.trapped)return;function u(v){if(d.paused||!r)return;const y=v.target;r.contains(y)?c.value=y:h(c.value,{select:!0})}function p(v){if(d.paused||!r)return;const y=v.relatedTarget;y!==null&&(r.contains(y)||h(c.value,{select:!0}))}function l(v){r.contains(c.value)||h(r)}document.addEventListener("focusin",u),document.addEventListener("focusout",p);const f=new MutationObserver(l);r&&f.observe(r,{childList:!0,subtree:!0}),s(()=>{document.removeEventListener("focusin",u),document.removeEventListener("focusout",p),f.disconnect()})}),L(async s=>{const r=i.value;if(await R(),!r)return;m.add(d);const u=g();if(!r.contains(u)){const l=new CustomEvent(C,M);r.addEventListener(C,f=>o("mountAutoFocus",f)),r.dispatchEvent(l),l.defaultPrevented||(me(ve(K(r)),{select:!0}),g()===u&&h(r))}s(()=>{r.removeEventListener(C,v=>o("mountAutoFocus",v));const l=new CustomEvent(_,M),f=v=>{o("unmountAutoFocus",v)};r.addEventListener(_,f),r.dispatchEvent(l),setTimeout(()=>{l.defaultPrevented||h(u??document.body,{select:!0}),r.removeEventListener(_,f),m.remove(d)},0)})});function b(s){if(!n.loop&&!n.trapped||d.paused)return;const r=s.key==="Tab"&&!s.altKey&&!s.ctrlKey&&!s.metaKey,u=g();if(r&&u){const p=s.currentTarget,[l,f]=ye(p);l&&f?!s.shiftKey&&u===f?(s.preventDefault(),n.loop&&h(l,{select:!0})):s.shiftKey&&u===l&&(s.preventDefault(),n.loop&&h(f,{select:!0})):u===p&&s.preventDefault()}}return(s,r)=>(Q(),z(ne(V),{ref_key:"currentRef",ref:a,tabindex:"-1","as-child":s.asChild,as:s.as,onKeydown:b},{default:ee(()=>[te(s.$slots,"default")]),_:3},8,["as-child","as"]))}}),Oe=Ee;export{Oe as F,Fe as a,g,Se as u};

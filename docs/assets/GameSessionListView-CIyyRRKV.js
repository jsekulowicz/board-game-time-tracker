import{c as h,_ as N,a as O,b as z,d as A,e as V,u as y,f as I,I as M,g as F}from"./UiCard.vue_vue_type_script_setup_true_lang-CKccHbgD.js";import{h as d,i as m,j as v,k as g,n as x,u as e,o as u,r as S,l as H,m as W,w as j,p as b,q as t,s as a,v as L,x as i,y as q,F as R,z as C,A as G,B as c}from"./index-BWwxUqkb.js";import{_ as T}from"./UiSkeleton.vue_vue_type_script_setup_true_lang-Bc6h1ijs.js";import{u as D}from"./useGameSessionListStore-Bcx0Y66r.js";import{R as U}from"./index-NYJFi9vx.js";const E={"data-slot":"table-container",class:"relative w-full overflow-auto"},P=d({__name:"UiTable",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("div",E,[v("table",{"data-slot":"table",class:x(e(h)("w-full caption-bottom text-sm",o.class))},[g(l.$slots,"default")],2)]))}}),J=d({__name:"UiTableBody",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("tbody",{"data-slot":"table-body",class:x(e(h)("[&_tr:last-child]:border-0",o.class))},[g(l.$slots,"default")],2))}}),_=d({__name:"UiTableCell",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("td",{"data-slot":"table-cell",class:x(e(h)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o.class))},[g(l.$slots,"default")],2))}}),k=d({__name:"UiTableRow",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("tr",{"data-slot":"table-row",class:x(e(h)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",o.class))},[g(l.$slots,"default")],2))}}),w=d({__name:"UiTableHead",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("th",{"data-slot":"table-head",class:x(e(h)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o.class))},[g(l.$slots,"default")],2))}}),K=d({__name:"UiTableHeader",props:{class:{}},setup(n){const o=n;return(l,s)=>(u(),m("thead",{"data-slot":"table-header",class:x(e(h)("[&_tr]:border-b",o.class))},[g(l.$slots,"default")],2))}}),Q=d({__name:"OverflowLabel",props:{text:{},class:{}},setup(n){const o=n,l=S(null),s=S(!1);let f=null,r=null;H(()=>{$();const p=l.value;p&&"ResizeObserver"in window&&(f=new ResizeObserver(()=>B()),f.observe(p))}),W(()=>{r&&clearTimeout(r),f&&l.value&&(f.unobserve(l.value),f.disconnect())}),j(()=>o.text,async()=>{await q(),$()});function B(p=100){r&&clearTimeout(r),r=window.setTimeout(()=>{$()},p)}function $(){const p=l.value;p&&(s.value=p.scrollWidth>p.clientWidth)}return(p,se)=>(u(),b(e(N),null,{default:t(()=>[a(e(A),null,{default:t(()=>[a(e(O),{"as-child":""},{default:t(()=>[v("span",{ref_key:"labelRef",ref:l,class:x(e(h)(o.class,"block whitespace-nowrap overflow-hidden truncate overflow-ellipsis"))},i(n.text),3)]),_:1}),s.value?(u(),b(e(z),{key:0},{default:t(()=>[v("span",null,i(n.text),1)]),_:1})):L("",!0)]),_:1})]),_:1}))}}),X={class:"flex flex-col space-y-3 w-full lg:max-w-[1200px]"},Y=d({__name:"GameSessionListTableLoading",setup(n){return(o,l)=>(u(),m("div",X,[(u(),m(R,null,C(5,s=>a(e(T),{key:`gs-table-placeholder-${s}`,class:"h-[5svh] w-full"})),64)),a(e(T),{class:"h-[5svh] w-4/5"})]))}}),Z=d({__name:"GameSessionListCard",setup(n){const o=D();return o.getGameSessionList(),(l,s)=>{const f=G("RouterLink");return e(o).loadingGameSessions?(u(),b(Y,{key:0})):(u(),b(e(V),{key:1,class:"py-0 overflow-hidden"},{default:t(()=>[a(e(P),{class:"w-full overflow-x-auto table-auto text-sm"},{default:t(()=>[a(e(K),null,{default:t(()=>[a(e(k),null,{default:t(()=>[a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[0]||(s[0]=[c("Name",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[1]||(s[1]=[c("Status",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[2]||(s[2]=[c("Game",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[3]||(s[3]=[c("Player count",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[4]||(s[4]=[c("Move count",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[5]||(s[5]=[c("Turn count",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[6]||(s[6]=[c("Created",-1)])]),_:1}),a(e(w),{class:"whitespace-nowrap"},{default:t(()=>[...s[7]||(s[7]=[c("Updated",-1)])]),_:1})]),_:1})]),_:1}),a(e(J),null,{default:t(()=>[(u(!0),m(R,null,C(e(o).gameSessions,r=>(u(),b(e(k),{key:r.id,class:"hover:bg-muted/30 transition-colors"},{default:t(()=>[a(e(_),null,{default:t(()=>[a(f,{class:"inline-flex underline",to:{name:e(U).GameSession,params:{id:r.id}}},{default:t(()=>[a(Q,{class:"max-w-[250px] lg:max-w-none",text:r.name},null,8,["text"])]),_:2},1032,["to"])]),_:2},1024),a(e(_),null,{default:t(()=>[c(i(r.status),1)]),_:2},1024),a(e(_),null,{default:t(()=>[c(i(r.game),1)]),_:2},1024),a(e(_),{class:"text-right w-0"},{default:t(()=>[c(i(r.players.length),1)]),_:2},1024),a(e(_),{class:"text-right w-0"},{default:t(()=>[c(i(r.currentMoveIndex+1),1)]),_:2},1024),a(e(_),{class:"text-right w-0"},{default:t(()=>[c(i(r.currentTurnIndex+1),1)]),_:2},1024),a(e(_),{class:"whitespace-nowrap w-0"},{default:t(()=>[c(i(e(y)(r.createdAt)),1)]),_:2},1024),a(e(_),{class:"whitespace-nowrap w-0"},{default:t(()=>[c(i(e(y)(r.updatedAt||"")),1)]),_:2},1024)]),_:2},1024))),128)),e(o).gameSessions.length?L("",!0):(u(),b(e(k),{key:0},{default:t(()=>[a(e(_),{colspan:"4",class:"text-center text-muted-foreground py-4"},{default:t(()=>[...s[8]||(s[8]=[c("No game sessions found",-1)])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}))}}}),ee={class:"flex items-center gap-4"},te={class:"font-semibold"},ce=d({__name:"GameSessionListView",setup(n){return(o,l)=>{const s=G("RouterLink");return u(),b(F,null,{header:t(({pageTitle:f})=>[v("div",ee,[v("h2",te,i(f),1),a(I,{size:"sm",variant:"outline",asChild:""},{default:t(()=>[a(s,{to:{name:e(U).GameSessionAdd}},{default:t(()=>[a(e(M),{icon:"radix-icons:plus"}),l[0]||(l[0]=v("div",null,"Add game session",-1))]),_:1},8,["to"])]),_:1})])]),default:t(()=>[a(Z)]),_:1})}}});export{ce as default};
